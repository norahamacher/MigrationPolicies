(this.webpackJsonpMigrationPolicies=this.webpackJsonpMigrationPolicies||[]).push([[0],{166:function(e,t,a){e.exports=a(234)},170:function(e,t,a){},171:function(e,t,a){},198:function(e,t){},234:function(e,t,a){"use strict";a.r(t);var r=a(27),n=a(24),i=a(2),o=a(3),s=a(4),p=a(5),c=a(1),l=a.n(c),h=a(22),m=a.n(h),u=(a(170),a(171),a(19)),d=a(65),g=a(116),f=a.n(g),v=function(e){Object(s.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).m_actionFilter=null,e.state={visible:!0,id:e.props.id,paragraphs:[]},e.headerHandleChange=function(t){t.isIntersecting&&e.props.id!==e.props.activeID&&e.props.app.setActiveID(e.props.id),e.setState({visible:e.props.id===e.props.activeID})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){for(var e=[],t=0;t<this.props.paragraphs.length;t++)e.push({text:this.props.paragraphs[t].props.content.text,filter:this.props.paragraphs[t].props.actionFilter}),this.setState({paragraphs:e})}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return l.a.createElement("section",{id:"section_"+this.state.id,className:"storyPanelSection ".concat(this.state.visible&&this.state.id===this.props.activeID?"activePanel":"inactivePanel")},l.a.createElement(d.a,{onChange:this.headerHandleChange,threshold:1},l.a.createElement("h1",{id:"chap_"+this.props.chapter,className:"sticky sectiontitle"},this.props.title)),l.a.createElement("div",{className:"panelcontent"},this.props.paragraphs.map((function(t,a){return l.a.createElement(b,{key:"chap_"+e.props.chapter+"_id_p"+a,id:"chap_"+e.props.chapter+"_id_p"+a,paragraph:t.props.content.text,actionFilter:t.props.actionFilter,yearStart:t.props.content.minYear,yearEnd:t.props.content.maxYear,app:e.props.app})}))))}}]),a}(c.Component),b=function(e){Object(s.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).m_firedAction=!1,e.m_statusChanged=!1,e.m_filterArray=["any",[]],e.state={id:e.props.id,visible:!1},e.handleScroll=function(t){if(e.state.visible){var a=m.a.findDOMNode(Object(u.a)(e)).getBoundingClientRect().top,r=m.a.findDOMNode(Object(u.a)(e)).getBoundingClientRect().bottom;e.m_firedAction||(e.state.highlighted?(e.props.actionFilter&&e.props.actionFilter.action(e.props.actionFilter.objects,!0),e.m_firedAction=!0):e.props.actionFilter&&(e.props.actionFilter.action(null,!0),e.m_firedAction=!0)),a>80&&a<600||a<150&&a>0&&r>300?e.state.highlighted||(e.setState({highlighted:!0}),e.props.app.updateYears(e.props.yearStart,e.props.yearEnd),e.m_firedAction=!1):e.state.highlighted&&(e.setState({highlighted:!1}),e.m_firedAction=!1)}},e.paragraphChange=function(t){e.setState({visible:t.isIntersecting})},e}return Object(o.a)(a,[{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return l.a.createElement(d.a,{onChange:this.paragraphChange},l.a.createElement("p",{className:"scrolltext ".concat(this.state.highlighted?"active":""),id:this.props.id},f()(this.props.paragraph)))}}]),a}(c.Component),y=a(48),x=a(251),Y=(c.Component,Object(y.a)({root:{color:"#52af77",height:12},thumb:{height:24,width:48,backgroundColor:"#fff",border:"1px solid currentColor",borderRadius:0,marginTop:-8,marginLeft:-12,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{top:5,left:7,fontSize:14,"& *":{background:"transparent",color:"#000"}},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}})(x.a)),w=a(34),k=a(118),I=a.n(k),C=a(64),E=a(123),A=(a(231),function(e){Object(s.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).m_debug=!0,e.m_percentageCalcs=[],e.updateDimensions=function(){e.setState({width:window.innerWidth,height:window.innerHeight,panelHeight:window.innerHeight-100})},e.state={sections:[],width:0,height:0,activeId:0,panelHeight:800,minYear:1945,maxYear:2020},e.panelChanged=!1,e.UNSAFE_componentWillMount=function(){var e;for(window.addEventListener("resize",this.updateDimensions),this.updateDimensions(),e=0;e<w.sections.length;e++)w.sections[e].renderparagraphs=this.createPanelContent(w.sections[e].year,w.sections[e].paragraphs);this.setState({sections:w.sections})},e.allPanels=[],e.setActiveID=function(t){e.setState({activeId:t})},e}return Object(o.a)(a,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"createPanelContent",value:function(e,t){for(var a=[],r="",n="",i=0;i<t.length;i++){if(n=e+"_"+i,t[i].features)for(var o=0;o<t[i].features.length;o++){var s=t[i].features[o];"link"===s.type&&(t[i].text=t[i].text.replace(s.text,'<a href="'+s.url+'" target="_blank">'+s.text+"</a>"))}if(t[i].actions)for(o=0;o<t[i].actions.length;o++){var p=t[i].actions[o];if(p.highlight){"type"===p.highlight.type?r={action:this.setActiveMulti,objects:[]}:"plant"===p.highlight.type&&(r={action:this.setActiveName,objects:[]});for(var c=0;c<p.highlight.keywords.length;c++)t[i].text=t[i].text.replace(p.highlight.keywords[c],"<span class='"+p.highlight.keywords[c]+"'>"+p.highlight.keywords[c]+"</span>"),r.objects.push(this.cap(p.highlight.keywords[c]))}}a.push(l.a.createElement("div",{content:t[i],id:n,actionFilter:r}))}return a}},{key:"updateYears",value:function(e,t){this.setState({minYear:e,maxYear:t})}},{key:"cap",value:function(e){return e.replace(/^\w/,(function(e){return e.toUpperCase()}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"MainContainer"},l.a.createElement("div",{className:"navbar",id:"yearNav"},this.state.sections.map((function(t,a){return l.a.createElement(S,{key:a,id:a,chapter:t.chapter,name:t.title,activeId:e.state.activeId})}))),l.a.createElement("div",{className:"Panels topDistance",style:{height:this.state.panelHeight}},this.state.sections.map((function(t,a){return l.a.createElement(v,{key:a,id:a,app:e,activeID:e.state.activeId,title:t.title,chapter:t.chapter,paragraphs:t.renderparagraphs})}))),this.state.width,l.a.createElement(N,{width:parseInt(this.state.width/2),minYear:this.state.minYear,maxYear:this.state.maxYear})))}}]),a}(c.Component)),S=function(e){var t=e.id,a=e.name,r=e.chapter,n=e.activeId;return l.a.createElement(I.a,{selector:"#chap_".concat(r),alignToTop:!1},l.a.createElement("div",{className:"navItem ".concat(t===n?"navItemActive":""," ")}," ",a," "))},_=l.a.useState,j=l.a.useEffect,O=l.a.useMemo,N=function(e){var t=e.width,a=e.minYear,i=e.maxYear,o=_({features:[]}),s=Object(n.a)(o,2),p=s[0],c=s[1],h=_(),m=Object(n.a)(h,2),u=m[0],d=m[1];j((function(){fetch("/MigrationPolicies/mergedMigrations.json").then((function(e){return console.log(e),e.json()})).then(c)}),[]);var g=C.b(C.a),f=function(e){return e.properties.GDP_MD_EST/Math.max(1e5,e.properties.POP_EST)},v=O((function(){return Math.max.apply(Math,Object(r.a)(p.features.map(f)))}),[p]);return g.domain([0,v]),l.a.createElement("div",{className:"globeContainer"},l.a.createElement(E.a,{width:t,globeImageUrl:"//unpkg.com/three-globe/example/img/earth-night.jpg",backgroundImageUrl:"//unpkg.com/three-globe/example/img/night-sky.png",polygonsData:p.features.filter((function(e){return"AQ"!==e.properties.ISO_A2})),polygonAltitude:function(e){return e===u?.1:.03},polygonCapColor:function(e){return M(e.properties.migrationpolicies,a,i)?"pink":"grey"},polygonSideColor:function(){return"rgba(0, 100, 0, 0.15)"},polygonStrokeColor:function(){return"#111"},polygonLabel:function(e){var t=e.properties;return'\n        <div class="popup"><b>'.concat(t.ADMIN," (").concat(t.ISO_A2,"):</b> <br />\n        ").concat(D(t.migrationpolicies,a,i),"\n        </div>\n      ")},onPolygonHover:d,polygonsTransitionDuration:300}))},D=function(e,t,a){if(e)for(var r=0;r<e.length;r++){var n=e[r]["Year of establishment"],i=e[r]["Year of disestablishment"];if("Nil"!==n&&void 0!==n&&void 0!==i&&parseInt(n.substr(0,4))<=a&&("Nil"===i||parseInt(i.substr(0,4))>t)){var o="<b>Institution Name:</b> "+e[r]["Institution name"]+"<br />";return o+="<b>Institution Overview:</b> "+e[r]["Institution Overview"]+"<br />",o+="<b> Year of establishment: </b> "+e[r]["Year of establishment"]+"<br />",o+="<b> Year of disestablishment: </b> "+e[r]["Year of disestablishment"]+"<br />"}}return""},M=function(e,t,a){if(e)for(var r=0;r<e.length;r++){var n=e[r]["Year of establishment"],i=e[r]["Year of disestablishment"];if("Nil"!==n&&void 0!==n&&void 0!==i&&parseInt(n.substr(0,4))<=a&&("Nil"===i||parseInt(i.substr(0,4))>t))return console.log("has active Policy"),!0}return!1};m.a.render(l.a.createElement(A,null),document.getElementById("root"))},34:function(e){e.exports=JSON.parse('{"sections":[{"chapter":1,"title":"Chapter 1","paragraphs":[{"minYear":1980,"maxYear":2020,"text":"Whole world, overview of data, years 1980-2020. Todo: animate through time while scrolling, or make an animation."}]},{"chapter":2,"title":"Chapter 2","paragraphs":[{"minYear":1945,"maxYear":1970,"text":"Zoom into key world regions.  1945-1970"},{"minYear":1971,"maxYear":1994,"text":"Zoom into key world regions.   1971-1994, 1994-2004, 2004-2020"},{"minYear":1994,"maxYear":2004,"text":"Zoom into key world regions. 1994-2004"},{"minYear":2004,"maxYear":2020,"text":"Zoom into key world regions.2004-2020"}]},{"chapter":3,"title":"Chapter 3","paragraphs":[{"minYear":1945,"maxYear":1955,"text":"Israel, Europe, Japan & China, 1945-1955"}]},{"chapter":4,"title":"Chapter 4","paragraphs":[{"minYear":1970,"maxYear":1994,"text":"India, Eritrea, Mexico, 1970-2994"}]},{"chapter":5,"title":"Chapter 5","paragraphs":[{"minYear":1970,"maxYear":1994,"text":"Philippines, South Asia (India, Nepal, Bangladesh, Pakistan), Central Asia 1970-1994"}]},{"chapter":6,"title":"Chapter 6","paragraphs":[{"minYear":1994,"maxYear":2004,"text":"Europe, Hungary, A8 and the Balkans,Ireland, Portugal, France, 1994-2004"},{"minYear":2002,"maxYear":2007,"text":"Africa (whole continent) 2002-2007"},{"minYear":2001,"maxYear":2005,"text":"South America 2001-2005"},{"minYear":2006,"maxYear":2009,"text":"Caribbean 2006-2009"}]},{"chapter":7,"title":"Chapter 7","paragraphs":[{"minYear":1989,"maxYear":2020,"text":"Black Sea region (see map on p163 of book), Russia, Moldova, Georgia, Azerbaijan, Armenia, Turkey 1989-2020"}]},{"chapter":8,"title":"Chapter 8","paragraphs":[{"minYear":2004,"maxYear":2020,"text":"Global institutions - spinning globe?,Geneva - United Nations, New York - United nations,Europe - 2015 migration crisis 2004-2020"}]},{"chapter":9,"title":"Chapter 9","paragraphs":[{"minYear":2004,"maxYear":2020,"text":"International organizations around the world,  The world bank, Global migration group, International organization for migration, Diaspora engagement industry 2004-2020"}]},{"chapter":10,"title":"Chapter 10","paragraphs":[{"minYear":2004,"maxYear":2020,"text":"Following policies - see diagram on p234 of book, Mexico-Israel-Phillipines (sequence), Israel-Ireland-Philippines-Isreal (3-coutnry loop),  Israel-Mexico-Ireland-Philipines-Israel (4 country loop), India-Philippines-Ireland-Mexico-Isreal (see diagram on p234) 2004-2020"}]},{"chapter":11,"title":"Conclusion","paragraphs":[{"minYear":2004,"maxYear":2020,"text":"Zoom out to level of whole world, whole time frame, like intro chapter / chapter 2"}]}]}')}},[[166,1,2]]]);
//# sourceMappingURL=main.a455bf60.chunk.js.map